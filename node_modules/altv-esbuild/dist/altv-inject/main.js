var nn=Object.defineProperty;var rn=(e,t,n)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V=(e,t,n)=>(rn(e,typeof t!="symbol"?t+"":t,n),n);var I="altv-esbuild",ee="__altv-esbuild-resource-control";var pe=class{receiver;sender;constructor(t,n,r){this.isCommunicatorSenderAndReceiver(t)?(this.sender=t.sender??null,this.receiver=t.receiver??null):(this.sender=t,this.receiver=t),this.receiver?.on("data",i=>{i=i.toString();for(let o of i.split("|"))if(!!o)try{let{event:s,args:l}=JSON.parse(o),a=n[s];if(!a){r(`received unknown event: ${s}`);return}a(...l)}catch(s){r(`failed to handle chunk: '${o}' error: ${s?.stack}`)}}),this.receiver?.on("error",i=>{i?.code==="ECONNRESET"||i?.code==="ECONNREFUSED"||r(`socket error: ${i.stack}`,i)})}send(t,...n){if(!this.sender)throw new Error("EventManager cannot send since sender was not provided");let r={args:n,event:t};this.sender.write(JSON.stringify(r)+"|")}destroy(){this.receiver?.removeAllListeners("data"),this.receiver?.removeAllListeners("error")}isCommunicatorSenderAndReceiver(t){return!!(t.sender||t.receiver)}};var Re=___altvEsbuild_altvInject_alt___,L=class{constructor(t){this.name=t;this.debug=()=>{}}debug;info(...t){Re.log(`~bl~[${I}][${this.name}]~w~`,...t)}error(...t){Re.logError(`[${I}][${this.name}]`,...t)}warn(...t){Re.logWarning(`[${I}][${this.name}]`,...t)}};var g={},on=/\u001b\[\d\d?m/g,{defineProperty:M,getOwnPropertyDescriptor:U,ownKeys:Z}=Reflect,{apply:sn,bind:At,call:ln}=Function.prototype,W=At.bind(ln);g.uncurryThis=W;var Ee=At.bind(sn);g.applyBind=Ee;var We=["ArrayOf","ArrayPrototypePush","ArrayPrototypeUnshift","MathHypot","MathMax","MathMin","StringPrototypeConcat","TypedArrayOf"];function Ge(e){return typeof e=="symbol"?`Symbol${e.description[7].toUpperCase()}${e.description.slice(8)}`:`${e[0].toUpperCase()}${e.slice(1)}`}function He(e,t,n,{enumerable:r,get:i,set:o}){M(e,`${t}Get${n}`,{__proto__:null,value:W(i),enumerable:r}),o!==void 0&&M(e,`${t}Set${n}`,{__proto__:null,value:W(o),enumerable:r})}function Pt(e,t,n){for(let r of Z(e)){let i=Ge(r),o=U(e,r);if("get"in o)He(t,n,i,o);else{let s=`${n}${i}`;M(t,s,{__proto__:null,...o}),We.includes(s)&&M(t,`${s}Apply`,{__proto__:null,value:Ee(o.value,e)})}}}function an(e,t,n){for(let r of Z(e)){let i=Ge(r),o=U(e,r);if("get"in o)He(t,n,i,o);else{let{value:s}=o;typeof s=="function"&&(o.value=s.bind(e));let l=`${n}${i}`;M(t,l,{__proto__:null,...o}),We.includes(l)&&M(t,`${l}Apply`,{__proto__:null,value:Ee(s,e)})}}}function ye(e,t,n){for(let r of Z(e)){let i=Ge(r),o=U(e,r);if("get"in o)He(t,n,i,o);else{let{value:s}=o;typeof s=="function"&&(o.value=W(s));let l=`${n}${i}`;M(t,l,{__proto__:null,...o}),We.includes(l)&&M(t,`${l}Apply`,{__proto__:null,value:Ee(s)})}}}["Proxy","globalThis"].forEach(e=>{g[e]=globalThis[e]});[decodeURI,decodeURIComponent,encodeURI,encodeURIComponent].forEach(e=>{g[e.name]=e});[escape,eval,unescape].forEach(e=>{g[e.name]=e});["JSON","Math","Proxy","Reflect"].forEach(e=>{Pt(globalThis[e],g,e)});["AggregateError","Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","Int16Array","Int32Array","Int8Array","Map","Number","Object","RangeError","ReferenceError","RegExp","Set","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakRef","WeakSet"].forEach(e=>{let t=globalThis[e];g[e]=t,Pt(t,g,e),ye(t.prototype,g,`${e}Prototype`)});["Promise"].forEach(e=>{let t=globalThis[e];g[e]=t,an(t,g,e),ye(t.prototype,g,`${e}Prototype`)});[{name:"TypedArray",original:Reflect.getPrototypeOf(Uint8Array)},{name:"ArrayIterator",original:{prototype:Reflect.getPrototypeOf(Array.prototype[Symbol.iterator]())}},{name:"StringIterator",original:{prototype:Reflect.getPrototypeOf(String.prototype[Symbol.iterator]())}}].forEach(({name:e,original:t})=>{g[e]=t,ye(t,g,e),ye(t.prototype,g,`${e}Prototype`)});var{ArrayPrototypeForEach:Je=Array.prototype.forEach.call,FinalizationRegistry:Ie=Ie,FunctionPrototypeCall:Ze=Function.prototype.call,Map:F=F,ObjectFreeze:ie=S.freeze.call,ObjectSetPrototypeOf:se=S.setPrototypeOf,Promise:G=G,PromisePrototypeThen:_t=G.prototype.then,Set:K=K,SymbolIterator:le=Symbol.iterator,WeakMap:he=he,WeakRef:Le=Le,WeakSet:me=me}=g,qe=(e,t)=>{class n{constructor(i){this._iterator=e(i)}next(){return t(this._iterator)}[le](){return this}}return se(n.prototype,null),ie(n.prototype),ie(n),n};g.SafeArrayIterator=qe(g.ArrayPrototypeSymbolIterator,g.ArrayIteratorPrototypeNext);g.SafeStringIterator=qe(g.StringPrototypeSymbolIterator,g.StringIteratorPrototypeNext);var dt=(e,t)=>{Je(Z(e),n=>{U(t,n)||M(t,n,{__proto__:null,...U(e,n)})})},j=(e,t)=>{if(le in e.prototype){let n=new e,r;Je(Z(e.prototype),i=>{if(!U(t.prototype,i)){let o=U(e.prototype,i);if(typeof o.value=="function"&&o.value.length===0&&le in(Ze(o.value,n)??{})){let s=W(o.value);r??=W(s(n).next);let l=qe(s,r);o.value=function(){return new l(this)}}M(t.prototype,i,{__proto__:null,...o})}})}else dt(e.prototype,t.prototype);return dt(e,t),se(t.prototype,null),ie(t.prototype),ie(t),t};g.makeSafe=j;g.SafeMap=j(F,class extends F{constructor(t){super(t)}});g.SafeWeakMap=j(he,class extends he{constructor(t){super(t)}});g.SafeSet=j(K,class extends K{constructor(t){super(t)}});g.SafeWeakSet=j(me,class extends me{constructor(t){super(t)}});g.SafeFinalizationRegistry=j(Ie,class extends Ie{constructor(t){super(t)}});g.SafeWeakRef=j(Le,class extends Le{constructor(t){super(t)}});var cn=j(G,class extends G{constructor(t){super(t)}});g.PromisePrototypeCatch=(e,t)=>_t(e,void 0,t);g.SafePromisePrototypeFinally=(e,t)=>new G((n,r)=>new cn((i,o)=>_t(e,i,o)).finally(t).then(n,r));g.AsyncIteratorPrototype=g.ReflectGetPrototypeOf(g.ReflectGetPrototypeOf(async function*(){}).prototype);se(g,null);ie(g);var{getOwnNonIndexProperties:Ne,getProxyDetails:fn=()=>{},kPending:Io=0,kFulfilled:Lo=1,kRejected:No=2,previewEntries:we,getConstructorName:Ye,propertyFilter:{ALL_PROPERTIES:$t,ONLY_ENUMERABLE:kt}={ALL_PROPERTIES:0,ONLY_ENUMERABLE:2}}={},dn=(e,t)=>{if(t===$t)return S.getOwnPropertyNames(e);if(kt)return Array.isArray(e)?[]:S.keys(e);throw new Error("unknown filter")};Ne=dn;var un=e=>e?.constructor?.name??"<UNKNOWN CONSTRUCTOR NAME>";Ye=un;var pn=e=>{let t=e instanceof F,n=[];if(!(e instanceof F||e instanceof K))return[n,t];try{n=e.entries()}catch(r){console.error("custom_previewEntries",r.stack)}return[n,t]};we=pn;var Be=Uint8Array.prototype.__proto__,{ArrayIsArray:Rt=Array.isArray,ArrayPrototypeFilter:Ct=Array.prototype.filter.call,ArrayPrototypePop:gn=Array.prototype.pop.call,ArrayPrototypePush:B=Array.prototype.push.call,ArrayPrototypePushApply:ut=Array.prototype.push.apply,ArrayPrototypeSort:yn=Array.prototype.sort.call,ArrayPrototypeUnshift:pt=Array.prototype.unshift.call,BigIntPrototypeValueOf:hn=BigInt.prototype.valueOf.call,BooleanPrototypeValueOf:mn=Boolean.prototype.valueOf.call,DatePrototypeGetTime:bn=Date.prototype.getTime.call,DatePrototypeToISOString:Sn=Date.prototype.toISOString.call,DatePrototypeToString:vn=Date.prototype.toString.call,ErrorPrototypeToString:En=Error.prototype.toString.call,FunctionPrototypeToString:wn=Function.prototype.toString.call,JSONStringify:Bo=JSON.stringify,MapPrototypeGetSize:An=S.getOwnPropertyDescriptor(F.prototype,"size").get.call,MapPrototypeEntries:Pn=F.prototype.entries.call,MathFloor:_n=Math.floor,MathMax:ce=Math.max,MathMin:T=Math.min,MathRound:$n=Math.round,MathSqrt:gt=Math.sqrt,MathTrunc:kn=Math.trunc,Number:oe=oe,NumberIsFinite:Rn=oe.isFinite,NumberIsNaN:Ot=isNaN,NumberParseFloat:Fo=parseFloat,NumberParseInt:To=parseInt,NumberPrototypeValueOf:Cn=oe.prototype.valueOf.call,Object:S=S,ObjectAssign:Xe=S.assign,ObjectCreate:Mt=S.create,ObjectDefineProperty:Qe=S.defineProperty,ObjectGetOwnPropertyDescriptor:be=S.getOwnPropertyDescriptor,ObjectGetOwnPropertyNames:Fe=S.getOwnPropertyNames,ObjectGetOwnPropertySymbols:On=S.getOwnPropertySymbols,ObjectGetPrototypeOf:et=S.getPrototypeOf,ObjectIs:Mn=S.is,ObjectKeys:Ae=S.keys,ObjectPrototypeHasOwnProperty:fe=S.prototype.hasOwnProperty.call,ObjectPrototypePropertyIsEnumerable:xt=S.prototype.propertyIsEnumerable.call,ObjectSeal:xn=S.seal,RegExp:z=z,RegExpPrototypeExec:tt=z.prototype.exec.call,RegExpPrototypeSymbolReplace:Se=z.prototype[Symbol.replace].call,RegExpPrototypeToString:In=z.prototype.toString.call,SafeStringIterator:Ln,SafeMap:Nn,SafeSet:It,SetPrototypeGetSize:Bn=S.getOwnPropertyDescriptor(K.prototype,"size").get.call,SetPrototypeValues:Fn=K.prototype.values.call,StringPrototypeCharCodeAt:Te=String.prototype.charCodeAt.call,StringPrototypeCodePointAt:Tn=String.prototype.codePointAt.call,StringPrototypeIncludes:ne=String.prototype.includes.call,StringPrototypeNormalize:jn=String.prototype.normalize.call,StringPrototypePadEnd:Dn=String.prototype.padEnd.call,StringPrototypePadStart:Ce=String.prototype.padStart.call,StringPrototypeRepeat:yt=String.prototype.repeat.call,StringPrototypeSlice:Oe=String.prototype.slice.call,StringPrototypeSplit:jo=String.prototype.split.call,StringPrototypeToLowerCase:zn=String.prototype.toLowerCase.call,StringPrototypeTrim:Un=String.prototype.trim.call,StringPrototypeValueOf:Kn=String.prototype.valueOf.call,SymbolPrototypeToString:Lt=Symbol.prototype.toString.call,SymbolPrototypeValueOf:Vn=Symbol.prototype.valueOf.call,SymbolToStringTag:ht=Symbol.toStringTag,TypedArrayPrototypeGetLength:Wn=S.getOwnPropertyDescriptor(Be,"length").get.call,TypedArrayPrototypeGetSymbolToStringTag:Gn=S.getOwnPropertyDescriptor(Be,Symbol.toStringTag).get.call}=g,{customInspectSymbol:Nt=Symbol.for("nodejs.util.inspect.custom"),isError:Bt=e=>e instanceof Error,join:re,removeColors:Ft}={};function Hn(e,t){let n="";if(e.length!==0){let r=e.length-1;for(let i=0;i<r;i++)n+=e[i],n+=t;n+=e[r]}return n}re=Hn;function Jn(e){return String.prototype.replace.call(e,on,"")}Ft=Jn;var{isStackOverflowError:Tt}={};function N(e){if(N.maxStack_ErrorMessage===void 0)try{let n=function(){n()};var t=n;n()}catch(n){N.maxStack_ErrorMessage=n.message,N.maxStack_ErrorName=n.name}return e&&e.name===N.maxStack_ErrorName&&e.message===N.maxStack_ErrorMessage}N.maxStack_ErrorMessage=void 0;N.maxStack_ErrorName=void 0;Tt=N;var{isAsyncFunction:Zn=e=>e?.constructor?.name==="AsyncFunction",isGeneratorFunction:qn=e=>e?.constructor?.name==="GeneratorFunction",isAnyArrayBuffer:Yn=e=>e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer,isArrayBuffer:jt,isArgumentsObject:Dt,isBoxedPrimitive:zt,isDataView:Ut,isExternal:Xn=()=>!1,isMap:Qn=e=>e instanceof F,isMapIterator:er=e=>e?.toString()==="[object Map Iterator]",isModuleNamespaceObject:nt,isNativeError:Kt=e=>!1,isPromise:tr=e=>e instanceof G,isSet:nr=e=>e instanceof K,isSetIterator:rr=e=>e?.toString()==="[object Set Iterator]",isWeakMap:or=e=>e instanceof he,isWeakSet:ir=e=>e instanceof me,isRegExp:sr=e=>e instanceof z,isDate:lr=e=>e instanceof Date,isTypedArray:ar=e=>e instanceof Be.constructor,isStringObject:cr=e=>typeof e=="object"&&e!=null&&e.constructor===String,isNumberObject:fr=e=>typeof e=="object"&&e!=null&&e.constructor===oe,isBooleanObject:dr=e=>typeof e=="object"&&e!=null&&e.constructor===Boolean,isBigIntObject:ur=e=>typeof e=="object"&&e!=null&&e.constructor===BigInt}={},pr=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0;jt=pr;var gr=e=>e+""=="[object Arguments]"&&e[le]!=null;Dt=gr;var yr=e=>typeof e=="object"&&e!=null&&(e.constructor===oe||e.constructor===String||e.constructor===Boolean||e.constructor===BigInt||e.constructor===Symbol);zt=yr;var hr=e=>e instanceof DataView;Ut=hr;var mr=e=>{try{let t=e&&S.getOwnPropertyDescriptor(e,Symbol.toStringTag);return t.value==="Module"&&!(t.writable||t.enumerable||t.configurable)}catch{return!1}};nt=mr;var je=class extends Error{};function Vt(e,t){if(!e)throw new je(t)}var br={exists:()=>!1};function Sr(e){let t="__internal_shit__"+e.name;return Qe(e,"name",{__proto__:null,value:t}),e}var vr=Sr((e,t,n)=>{let r=n==null,i=r?!1:n.allowArray,o=r?!1:n.allowFunction;if(!(r?!1:n.nullable)&&e===null||!i&&Rt(e)||typeof e!="object"&&(!o||typeof e!="function"))throw new Error(`[validateObject] invalid ${t} type of arg, expected: Object`)});function Er(e,t){if(typeof e!="string")throw new Error(`value ${t} must be string`)}var Me,Wt=new It(Ct(Fe(globalThis),e=>tt(/^[A-Z][a-zA-Z0-9]+$/,e)!==null)),Gt=e=>typeof e>"u"&&e!==void 0,A=xn({showHidden:!1,depth:2,colors:!1,customInspect:!0,showProxy:!1,maxArrayLength:100,maxStringLength:1e4,breakLength:80,compact:3,sorted:!1,getters:!1,numericSeparator:!1}),H=0,rt=1,ae=2,wr=/[\x00-\x1f\x27\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/,De=/[\x00-\x1f\x27\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/g,Ar=/[\x00-\x1f\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/,Pr=/[\x00-\x1f\x5c\x7f-\x9f]|[\ud800-\udbff](?![\udc00-\udfff])|(?<![\ud800-\udbff])[\udc00-\udfff]/g,_r=/^[a-zA-Z_][a-zA-Z_0-9]*$/,$r=/^(0|[1-9][0-9]*)$/,kr=/^ {4}at (?:[^/\\(]+ \(|)node:(.+):\d+:\d+\)?$/,Rr=/[/\\]node_modules[/\\](.+?)(?=[/\\])/g,Cr=/^(\s+[^(]*?)\s*{/,Or=/(\/\/.*?\n)|(\/\*(.|\n)*?\*\/)/g,Mr=16,Pe=0,xr=1,Ir=2,ve=["\\x00","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\x07","\\b","\\t","\\n","\\x0B","\\f","\\r","\\x0E","\\x0F","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1A","\\x1B","\\x1C","\\x1D","\\x1E","\\x1F","","","","","","","","\\'","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\x7F","\\x80","\\x81","\\x82","\\x83","\\x84","\\x85","\\x86","\\x87","\\x88","\\x89","\\x8A","\\x8B","\\x8C","\\x8D","\\x8E","\\x8F","\\x90","\\x91","\\x92","\\x93","\\x94","\\x95","\\x96","\\x97","\\x98","\\x99","\\x9A","\\x9B","\\x9C","\\x9D","\\x9E","\\x9F"],Lr="[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))",Nr=new z(Lr,"g"),ot;function Br(e,t){let n={stylize:e.stylize,showHidden:e.showHidden,depth:e.depth,colors:e.colors,customInspect:e.customInspect,showProxy:e.showProxy,maxArrayLength:e.maxArrayLength,maxStringLength:e.maxStringLength,breakLength:e.breakLength,compact:e.compact,sorted:e.sorted,getters:e.getters,numericSeparator:e.numericSeparator,...e.userOptions};if(t){se(n,null);for(let r of Ae(n))(typeof n[r]=="object"||typeof n[r]=="function")&&n[r]!==null&&delete n[r];n.stylize=se((r,i)=>{let o;try{o=`${e.stylize(r,i)}`}catch{}return typeof o!="string"?r:o},null)}return n}function O(e,t){let n={budget:{},indentationLvl:0,seen:[],currentDepth:0,stylize:Ke,showHidden:A.showHidden,depth:A.depth,colors:A.colors,customInspect:A.customInspect,showProxy:A.showProxy,maxArrayLength:A.maxArrayLength,maxStringLength:A.maxStringLength,breakLength:A.breakLength,compact:A.compact,sorted:A.sorted,getters:A.getters,numericSeparator:A.numericSeparator};if(arguments.length>1){if(arguments.length>2&&(arguments[2]!==void 0&&(n.depth=arguments[2]),arguments.length>3&&arguments[3]!==void 0&&(n.colors=arguments[3])),typeof t=="boolean")n.showHidden=t;else if(t){let r=Ae(t);for(let i=0;i<r.length;++i){let o=r[i];fe(A,o)||o==="stylize"?n[o]=t[o]:n.userOptions===void 0&&(n.userOptions=t)}}}return n.colors&&(n.stylize=Fr),n.maxArrayLength===null&&(n.maxArrayLength=1/0),n.maxStringLength===null&&(n.maxStringLength=1/0),_(n,e,0)}O.custom=Nt;Qe(O,"defaultOptions",{__proto__:null,get(){return A},set(e){return vr(e,"options"),Xe(A,e)}});O.colors=Xe(Mt(null),{reset:["w",0],bold:["wl"],dim:["w"],italic:["w"],underline:["w"],blink:["w"],inverse:["w"],hidden:["w"],strikethrough:["w"],doubleunderline:["w"],black:["k"],red:["rl"],green:["gl"],yellow:["yl"],blue:["bl"],magenta:["ml"],cyan:["cl"],white:["wl"],bgBlack:["w"],bgRed:["w"],bgGreen:["w"],bgYellow:["w"],bgBlue:["w"],bgMagenta:["w"],bgCyan:["w"],bgWhite:["w"],framed:["w"],overlined:["w"],gray:["kl"],redBright:["rl"],greenBright:["gl"],yellowBright:["yl"],blueBright:["bl"],magentaBright:["ml"],cyanBright:["cl"],whiteBright:["wl"],bgGray:["kl"],bgRedBright:["rl"],bgGreenBright:["gl"],bgYellowBright:["yl"],bgBlueBright:["bl"],bgMagentaBright:["ml"],bgCyanBright:["cl"],bgWhiteBright:["wl"]});function C(e,t){Qe(O.colors,t,{__proto__:null,get(){return this[e]},set(n){this[e]=n},configurable:!0,enumerable:!1})}C("gray","grey");C("gray","blackBright");C("bgGray","bgGrey");C("bgGray","bgBlackBright");C("dim","faint");C("strikethrough","crossedout");C("strikethrough","strikeThrough");C("strikethrough","crossedOut");C("hidden","conceal");C("inverse","swapColors");C("inverse","swapcolors");C("doubleunderline","doubleUnderline");O.styles=Xe(Mt(null),{special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red",module:"underline"});function xe(e,t){return t===-1?`"${e}"`:t===-2?`\`${e}\``:`'${e}'`}function ze(e){let t=Te(e);return ve.length>t?ve[t]:`\\u${t.toString(16)}`}function Ue(e){let t=wr,n=De,r=39;if(ne(e,"'")&&(ne(e,'"')?!ne(e,"`")&&!ne(e,"${")&&(r=-2):r=-1,r!==39&&(t=Ar,n=Pr)),e.length<5e3&&tt(t,e)===null)return xe(e,r);if(e.length>100)return e=Se(n,e,ze),xe(e,r);let i="",o=0;for(let s=0;s<e.length;s++){let l=Te(e,s);if(l===r||l===92||l<32||l>126&&l<160)o===s?i+=ve[l]:i+=`${Oe(e,o,s)}${ve[l]}`,o=s+1;else if(l>=55296&&l<=57343){if(l<=56319&&s+1<e.length){let a=Te(e,s+1);if(a>=56320&&a<=57343){s++;continue}}i+=`${Oe(e,o,s)}${`\\u${l.toString(16)}`}`,o=s+1}}return o!==e.length&&(i+=Oe(e,o)),xe(i,r)}function Fr(e,t){let n=O.styles[t];if(n!==void 0){let r=O.colors[n];if(r!==void 0)return`~${r[0]}~${e}~w~`}return e}function Ke(e){return e}function Tr(){return[]}function jr(e,t){try{return e instanceof t}catch{return!1}}function Ht(e,t,n,r){let i,o=e;for(;e||Gt(e);){let a=be(e,"constructor");if(a!==void 0&&typeof a.value=="function"&&a.value.name!==""&&jr(o,a.value))return r!==void 0&&(i!==e||!Wt.has(a.value.name))&&Dr(t,o,i||o,n,r),String(a.value.name);e=et(e),i===void 0&&(i=e)}if(i===null)return null;let s=Ye(o);if(n>t.depth&&t.depth!==null)return`${s} <Complex prototype>`;let l=Ht(i,t,n+1,r);return l===null?`${s} <${O(i,{...t,customInspect:!1,depth:-1})}>`:`${s} <${l}>`}function Dr(e,t,n,r,i){let o=0,s,l;do{if(o!==0||t===n){if(n=et(n),n===null)return;let a=be(n,"constructor");if(a!==void 0&&typeof a.value=="function"&&Wt.has(a.value.name))return}o===0?l=new It:Je(s,a=>l.add(a)),s=Z(n),B(e.seen,t);for(let a of s){if(a==="constructor"||fe(t,a)||o!==0&&l.has(a))continue;let f=be(n,a);if(typeof f.value=="function")continue;let c=J(e,n,r,a,H,f,t);e.colors?B(i,`\x1B[2m${c}\x1B[22m`):B(i,c)}gn(e.seen)}while(++o!==3)}function P(e,t,n,r=""){return e===null?t!==""&&n!==t?`[${n}${r}: null prototype] [${t}] `:`[${n}${r}: null prototype] `:t!==""&&e!==t?`${e}${r} [${t}] `:`${e}${r} `}function te(e,t){let n,r=On(e);if(t)n=Fe(e),r.length!==0&&ut(n,r);else{try{n=Ae(e)}catch(i){Vt(Kt(i)&&i.name==="ReferenceError"&&nt(e)),n=Fe(e)}r.length!==0&&ut(n,Ct(r,o=>xt(e,o)))}return n}function ge(e,t,n){let r="";return t===null&&(r=Ye(e),r===n&&(r="Object")),P(t,n,r)}function zr(e,t,n){if(n>e.depth&&e.depth!==null)return e.stylize("Proxy [Array]","special");n+=1,e.indentationLvl+=2;let r=[_(e,t[0],n),_(e,t[1],n)];return e.indentationLvl-=2,lt(e,r,"",["Proxy [","]"],ae,n)}function _(e,t,n,r){if(typeof t!="object"&&typeof t!="function"&&!Gt(t))return st(e.stylize,t,e);if(t===null)return e.stylize("null","null");let i=t,o=fn(t,!!e.showProxy);if(o!==void 0){if(o===null||o[0]===null)return e.stylize("<Revoked Proxy>","special");if(e.showProxy)return zr(e,o,n);t=o}if(e.customInspect){let s=t[Nt];if(typeof s=="function"&&s!==O&&!(t.constructor&&t.constructor.prototype===t)){let l=e.depth===null?null:e.depth-n,a=o!==void 0||!(i instanceof S),f=Ze(s,i,l,Br(e,a),O);if(f!==i)return typeof f!="string"?_(e,f,n):f.replace(/\n/g,`
${" ".repeat(e.indentationLvl)}`)}}if(e.seen.includes(t)){let s=1;return e.circular===void 0?(e.circular=new Nn,e.circular.set(t,s)):(s=e.circular.get(t),s===void 0&&(s=e.circular.size+1,e.circular.set(t,s))),e.stylize(`[Circular *${s}]`,"special")}return Ur(e,t,n,r)}function Ur(e,t,n,r){let i,o;e.showHidden&&(n<=e.depth||e.depth===null)&&(o=[]);let s=Ht(t,e,n,o);o!==void 0&&o.length===0&&(o=void 0);let l=t[ht];(typeof l!="string"||l!==""&&(e.showHidden?fe:xt)(t,ht))&&(l="");let a="",f=Tr,c,p=!0,y=0,h=e.showHidden?$t:kt,E=H;if(t[le]||s===null)if(p=!1,Rt(t)){let d=s!=="Array"||l!==""?P(s,l,"Array",`(${t.length})`):"";if(i=Ne(t,h),c=[`${d}[`,"]"],t.length===0&&i.length===0&&o===void 0)return`${c[0]}]`;E=ae,f=ro}else if(nr(t)){let d=Bn(t),b=P(s,l,"Set",`(${d})`);if(i=te(t,e.showHidden),f=s!==null?bt.bind(null,t):bt.bind(null,Fn(t)),d===0&&i.length===0&&o===void 0)return`${b}{}`;c=[`${b}{`,"}"]}else if(Qn(t)){let d=An(t),b=P(s,l,"Map",`(${d})`);if(i=te(t,e.showHidden),f=s!==null?St.bind(null,t):St.bind(null,Pn(t)),d===0&&i.length===0&&o===void 0)return`${b}{}`;c=[`${b}{`,"}"]}else if(ar(t)){i=Ne(t,h);let d=t,b="";s===null&&(b=Gn(t),d=new g[b](t));let ft=Wn(t);if(c=[`${P(s,l,b,`(${ft})`)}[`,"]"],t.length===0&&i.length===0&&!e.showHidden)return`${c[0]}]`;f=oo.bind(null,d,ft),E=ae}else er(t)?(i=te(t,e.showHidden),c=mt("Map",l),f=Et.bind(null,c)):rr(t)?(i=te(t,e.showHidden),c=mt("Set",l),f=Et.bind(null,c)):p=!0;if(p)if(i=te(t,e.showHidden),c=["{","}"],s==="Object"){if(Dt(t)?c[0]="[Arguments] {":l!==""&&(c[0]=`${P(s,l,"Object")}{`),i.length===0&&o===void 0)return`${c[0]}}`}else if(typeof t=="function"){if(a=Wr(t,s,l),i.length===0&&o===void 0)return e.stylize(a,"special")}else if(sr(t)){a=In(s!==null?t:new z(t));let d=P(s,l,"RegExp");if(d!=="RegExp "&&(a=`${d}${a}`),i.length===0&&o===void 0||n>e.depth&&e.depth!==null)return e.stylize(a,"regexp")}else if(lr(t)){a=Ot(bn(t))?vn(t):Sn(t);let d=P(s,l,"Date");if(d!=="Date "&&(a=`${d}${a}`),i.length===0&&o===void 0)return e.stylize(a,"date")}else if(Bt(t)){if(a=qr(t,s,l,e,i),i.length===0&&o===void 0)return a}else if(Yn(t)){let d=jt(t)?"ArrayBuffer":"SharedArrayBuffer",b=P(s,l,d);if(r===void 0)f=no;else if(i.length===0&&o===void 0)return b+`{ byteLength: ${it(e.stylize,t.byteLength,!1)} }`;c[0]=`${b}{`,pt(i,"byteLength")}else if(Ut(t))c[0]=`${P(s,l,"DataView")}{`,pt(i,"byteLength","byteOffset","buffer");else if(tr(t))c[0]=`${P(s,l,"Promise")}{`,f=lo;else if(ir(t))c[0]=`${P(s,l,"WeakSet")}{`,f=e.showHidden?io:vt;else if(or(t))c[0]=`${P(s,l,"WeakMap")}{`,f=e.showHidden?so:vt;else if(nt(t))c[0]=`${P(s,l,"Module")}{`,f=eo.bind(null,i);else if(zt(t)){if(a=Kr(t,e,i,s,l),i.length===0&&o===void 0)return a}else{if(i.length===0&&o===void 0){if(Xn(t)){let d="UNSUPPORTED VALUE";return e.stylize(`[External: ${d}]`,"special")}return`${ge(t,s,l)}{}`}c[0]=`${ge(t,s,l)}{`}if(n>e.depth&&e.depth!==null){let d=ge(t,s,l).slice(0,-1);return s!==null&&(d=`[${d}]`),e.stylize(d,"special")}n+=1,e.seen.push(t),e.currentDepth=n;let $,Q=e.indentationLvl;try{for($=f(e,t,n),y=0;y<i.length;y++)$.push(J(e,t,n,i[y],E));o!==void 0&&$.push(...o)}catch(d){let b=ge(t,s,l).slice(0,-1);return Xr(e,d,b,Q)}if(e.circular!==void 0){let d=e.circular.get(t);if(d!==void 0){let b=e.stylize(`<ref *${d}>`,"special");e.compact!==!0?a=a===""?b:`${b} ${a}`:c[0]=`${b} ${c[0]}`}}if(e.seen.pop(),e.sorted){let d=e.sorted===!0?void 0:e.sorted;if(E===H)$=$.sort(d);else if(i.length>1){let b=$.slice($.length-i.length).sort(d);$.splice($.length-i.length,i.length,...b)}}let v=lt(e,$,a,c,E,n,t),R=(e.budget[e.indentationLvl]||0)+v.length;return e.budget[e.indentationLvl]=R,R>2**27&&(e.depth=-1),v}function mt(e,t){return t!==`${e} Iterator`&&(t!==""&&(t+="] ["),t+=`${e} Iterator`),[`[${t}] {`,"}"]}function Kr(e,t,n,r,i){let o,s;fr(e)?(o=Cn,s="Number"):cr(e)?(o=Kn,s="String",n.splice(0,e.length)):dr(e)?(o=mn,s="Boolean"):ur(e)?(o=hn,s="BigInt"):(o=Vn,s="Symbol");let l=`[${s}`;return s!==r&&(r===null?l+=" (null prototype)":l+=` (${r})`),l+=`: ${st(Ke,o(e),t)}]`,i!==""&&i!==r&&(l+=` [${i}]`),n.length!==0||t.stylize===Ke?l:t.stylize(l,zn(s))}function Vr(e,t,n){let o=`class ${fe(e,"name")&&e.name||"(anonymous)"}`;if(t!=="Function"&&t!==null&&(o+=` [${t}]`),n!==""&&t!==n&&(o+=` [${n}]`),t!==null){let s=et(e).name;s&&(o+=` extends ${s}`)}else o+=" extends [null prototype]";return`[${o}]`}function Wr(e,t,n){let r=wn(e);if(r.startsWith("class")&&r.endsWith("}")){let s=r.slice(5,-1),l=s.indexOf("{");if(l!==-1&&(!s.slice(0,l).includes("(")||Cr.test(s.replace(Or))))return Vr(e,t,n)}let i="Function";qn(e)&&(i=`Generator${i}`),Zn(e)&&(i=`Async${i}`);let o=`[${i}`;return t===null&&(o+=" (null prototype)"),e.name===""?o+=" (anonymous)":o+=`: ${e.name}`,o+="]",t!==i&&t!==null&&(o+=` ${t}`),n!==""&&t!==n&&(o+=` [${n}]`),o}function Gr(e,t){for(let n=0;n<e.length-3;n++){let r=t.indexOf(e[n]);if(r!==-1){let i=t.length-r;if(i>3){let o=1,s=T(e.length-n,i);for(;s>o&&e[n+o]===t[r+o];)o++;if(o>3)return{len:o,offset:n}}}}return{len:0,offset:0}}function Jt(e){return e.stack?String(e.stack):En(e)}function Hr(e,t,n){let r=n.split(`
`);if(t.cause&&Bt(t.cause)){let i=Jt(t.cause),o=i.indexOf(`
    at`);if(o!==-1){let s=i.slice(o+1).split(`
`),{len:l,offset:a}=Gr(r,s);if(l>0){let f=l-2,c=`    ... ${f} lines matching cause stack trace ...`;r.splice(a+1,f,e.stylize(c,"undefined"))}}}return r}function Jr(e,t,n,r){let i=n.length;if(t===null||n.endsWith("Error")&&e.startsWith(n)&&(e.length===i||e[i]===":"||e[i]===`
`)){let o="Error";if(t===null){let l=e.match(/^([A-Z][a-z_ A-Z0-9[\]()-]+)(?::|\n {4}at)/)||e.match(/^([a-z_A-Z0-9-]*Error)$/);o=l&&l[1]||"",i=o.length,o=o||"Error"}let s=P(t,r,o).slice(0,-1);n!==s&&(s.includes(n)?i===0?e=`${s}: ${e}`:e=`${s}${e.slice(i)}`:e=`${s} [${n}]${e.slice(i)}`)}return e}function Zr(e,t,n,r){if(!e.showHidden&&t.length!==0)for(let i of["name","message","stack"]){let o=t.indexOf(i);o!==-1&&r.includes(n[i])&&t.splice(o,1)}}function qr(e,t,n,r,i){let o=e.name!=null?String(e.name):"Error",s=Jt(e);Zr(r,i,e,s),"cause"in e&&(i.length===0||!i.includes("cause"))&&i.push("cause"),s=Jr(s,t,o,n);let l=e.message&&s.indexOf(e.message)||-1;l!==-1&&(l+=e.message.length);let a=s.indexOf(`
    at`,l);if(a===-1)s=`[${s}]`;else{let f=s.slice(0,a),c=Hr(r,e,s.slice(a+1));if(r.colors)for(let p of c){let y=p.match(kr);if(y!==null&&br.exists(y[1]))f+=`
${r.stylize(p,"undefined")}`;else{let h;f+=`
`;let E=0;for(;(h=Rr.exec(p))!==null;)f+=p.slice(E,h.index+14),f+=r.stylize(h[1],"module"),E=h.index+h[0].length;f+=E===0?p:p.slice(E)}}else f+=`
${c.join(`
`)}`;s=f}if(r.indentationLvl!==0){let f=" ".repeat(r.indentationLvl);s=s.replace(/\n/g,`
${f}`)}return s}function Yr(e,t,n){let r=0,i=0,o=0,s=t.length;e.maxArrayLength<t.length&&s--;let l=2,a=new Array(s);for(;o<s;o++){let c=ot(t[o],e.colors);a[o]=c,r+=c+l,i<c&&(i=c)}let f=i+l;if(f*3+e.indentationLvl<e.breakLength&&(r/f>5||i<=6)){let p=gt(f-r/t.length),y=ce(f-3-p,1),h=T($n(gt(2.5*y*s)/y),_n((e.breakLength-e.indentationLvl)/f),e.compact*4,15);if(h<=1)return t;let E=[],$=[];for(let v=0;v<h;v++){let D=0;for(let R=v;R<t.length;R+=h)a[R]>D&&(D=a[R]);D+=l,$[v]=D}let Q=Ce;if(n!==void 0){for(let v=0;v<t.length;v++)if(typeof n[v]!="number"&&typeof n[v]!="bigint"){Q=Dn;break}}for(let v=0;v<s;v+=h){let D=T(v+h,s),R="",d=v;for(;d<D-1;d++){let b=$[d-v]+t[d].length-a[d];R+=Q(`${t[d]}, `,b," ")}if(Q===Ce){let b=$[d-v]+t[d].length-a[d]-l;R+=Ce(t[d],b," ")}else R+=t[d];B(E,R)}e.maxArrayLength<t.length&&B(E,t[s]),t=E}return t}function Xr(e,t,n,r){if(Tt(t))return e.seen.pop(),e.indentationLvl=r,e.stylize(`[${n}: Inspection interrupted prematurely. Maximum call stack size exceeded.]`,"special");throw new Error(t.stack)}function Ve(e){let t="",n=e.length,r=e.startsWith("-")?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return n===e.length?e:`${e.slice(0,n)}${t}`}function Qr(e){let t="",n=0;for(;n<e.length-3;n+=3)t+=`${e.slice(n,n+3)}_`;return n===0?e:`${t}${e.slice(n)}`}function it(e,t,n){if(!n)return Mn(t,-0)?e("-0","number"):e(`${t}`,"number");let r=kn(t),i=String(r);return r===t?!Rn(t)||i.includes("e")?e(i,"number"):e(`${Ve(i)}`,"number"):Ot(t)?e(i,"number"):e(`${Ve(i)}.${Qr(String(t).slice(i.length+1))}`,"number")}function Zt(e,t,n){let r=String(t);return e(n?`${Ve(r)}n`:`${r}n`,"bigint")}function st(e,t,n){if(typeof t=="string"){let r="";if(t.length>n.maxStringLength){let i=t.length-n.maxStringLength;t=t.slice(0,n.maxStringLength),r=`... ${i} more character${i>1?"s":""}`}return n.compact!==!0&&t.length>Mr&&t.length>n.breakLength-n.indentationLvl-4?t.split(/(?<=\n)/).map(i=>e(Ue(i),"string")).join(` +
${" ".repeat(n.indentationLvl+2)}`)+r:e(Ue(t),"string")+r}return typeof t=="number"?it(e,t,n.numericSeparator):typeof t=="bigint"?Zt(e,t,n.numericSeparator):typeof t=="boolean"?e(`${t}`,"boolean"):typeof t>"u"?e("undefined","undefined"):e(Lt(t),"symbol")}function eo(e,t,n,r){let i=new Array(e.length);for(let o=0;o<e.length;o++)try{i[o]=J(t,n,r,e[o],H)}catch(s){Vt(Kt(s)&&s.name==="ReferenceError");let l={[e[o]]:""};i[o]=J(t,l,r,e[o],H);let a=i[o].lastIndexOf(" ");i[o]=i[o].slice(0,a+1)+t.stylize("<uninitialized>","special")}return e.length=0,i}function to(e,t,n,r,i,o){let s=Ae(t),l=o;for(;o<s.length&&i.length<r;o++){let f=s[o],c=+f;if(c>2**32-2)break;if(`${l}`!==f){if(!$r.test(f))break;let p=c-l,y=p>1?"s":"",h=`<${p} empty item${y}>`;if(i.push(e.stylize(h,"undefined")),l=c,i.length===r)break}i.push(J(e,t,n,f,rt)),l++}let a=t.length-l;if(i.length!==r){if(a>0){let f=a>1?"s":"",c=`<${a} empty item${f}>`;i.push(e.stylize(c,"undefined"))}}else a>0&&i.push(`... ${a} more item${a>1?"s":""}`);return i}function no(e,t){let n;try{n=new Uint8Array(t)}catch{return[e.stylize("(detached)","special")]}Me===void 0&&(Me=function(s){return[...new Uint8Array(s)].map(l=>l.toString(16).padStart(2,"0")).join("")});let r=Un(Se(/(.{2})/g,Me(n,0,T(e.maxArrayLength,n.length)),"$1 ")),i=n.length-e.maxArrayLength;return i>0&&(r+=` ... ${i} more byte${i>1?"s":""}`),[`${e.stylize("[Uint8Contents]","special")}: <${r}>`]}function ro(e,t,n){let r=t.length,i=T(ce(0,e.maxArrayLength),r),o=r-i,s=[];for(let l=0;l<i;l++){if(!fe(t,l))return to(e,t,n,i,s,l);s.push(J(e,t,n,l,rt))}return o>0&&s.push(`... ${o} more item${o>1?"s":""}`),s}function oo(e,t,n,r,i){let o=T(ce(0,n.maxArrayLength),t),s=e.length-o,l=new Array(o),a=e.length>0&&typeof e[0]=="number"?it:Zt;for(let f=0;f<o;++f)l[f]=a(n.stylize,e[f],n.numericSeparator);if(s>0&&(l[o]=`... ${s} more item${s>1?"s":""}`),n.showHidden){n.indentationLvl+=2;for(let f of["BYTES_PER_ELEMENT","length","byteLength","byteOffset","buffer"]){let c=_(n,e[f],i,!0);B(l,`[${f}]: ${c}`)}n.indentationLvl-=2}return l}function bt(e,t,n,r){let i=[];t.indentationLvl+=2;for(let o of e)B(i,_(t,o,r));return t.indentationLvl-=2,i}function St(e,t,n,r){let i=[];t.indentationLvl+=2;for(let{0:o,1:s}of e)i.push(`${_(t,o,r)} => ${_(t,s,r)}`);return t.indentationLvl-=2,i}function qt(e,t,n,r){let i=ce(e.maxArrayLength,0),o=T(i,n.length),s=new Array(o);e.indentationLvl+=2;for(let a=0;a<o;a++)s[a]=_(e,n[a],t);e.indentationLvl-=2,r===Pe&&!e.sorted&&yn(s);let l=n.length-o;return l>0&&B(s,`... ${l} more item${l>1?"s":""}`),s}function Yt(e,t,n,r){let i=ce(e.maxArrayLength,0),o=n.length/2,s=o-i,l=T(i,o),a=new Array(l),f=0;if(e.indentationLvl+=2,r===Pe){for(;f<l;f++){let c=f*2;a[f]=`${_(e,n[c],t)} => ${_(e,n[c+1],t)}`}e.sorted||(a=a.sort())}else for(;f<l;f++){let c=f*2,p=[_(e,n[c],t),_(e,n[c+1],t)];a[f]=lt(e,p,"",["[","]"],ae,t)}return e.indentationLvl-=2,s>0&&a.push(`... ${s} more item${s>1?"s":""}`),a}function vt(e){return[e.stylize("<items unknown>","special")]}function io(e,t,n){let r=we(t);return qt(e,n,r,Pe)}function so(e,t,n){let r=we(t);return Yt(e,n,r,Pe)}function Et(e,t,n,r){let{0:i,1:o}=we(n,!0);return o?(e[0]=e[0].replace(/ Iterator] {$/," Entries] {"),Yt(t,r,i,Ir)):qt(t,r,i,xr)}function lo(e,t,n){return[""]}function J(e,t,n,r,i,o,s=t){let l,a,f=" ";if(o=o||be(t,r)||{value:t[r],enumerable:!0},o.value!==void 0){let c=e.compact!==!0||i!==H?2:3;e.indentationLvl+=c,a=_(e,o.value,n),c===3&&e.breakLength<ot(a,e.colors)&&(f=`
${" ".repeat(e.indentationLvl)}`),e.indentationLvl-=c}else if(o.get!==void 0){let c=o.set!==void 0?"Getter/Setter":"Getter",p=e.stylize,y="special";if(e.getters&&(e.getters===!0||e.getters==="get"&&o.set===void 0||e.getters==="set"&&o.set!==void 0))try{let h=Ze(o.get,s);if(e.indentationLvl+=2,h===null)a=`${p(`[${c}:`,y)} ${p("null","null")}${p("]",y)}`;else if(typeof h=="object")a=`${p(`[${c}]`,y)} ${_(e,h,n)}`;else{let E=st(p,h,e);a=`${p(`[${c}:`,y)} ${E}${p("]",y)}`}e.indentationLvl-=2}catch(h){let E=`<Inspection threw (${h.message})>`;a=`${p(`[${c}:`,y)} ${E}${p("]",y)}`}else a=e.stylize(`[${c}]`,y)}else o.set!==void 0?a=e.stylize("[Setter]","special"):a=e.stylize("undefined","undefined");if(i===rt)return a;if(typeof r=="symbol"){let c=Se(De,Lt(r),ze);l=`[${e.stylize(c,"symbol")}]`}else r==="__proto__"?l="['__proto__']":o.enumerable===!1?l=`[${Se(De,r,ze)}]`:tt(_r,r)!==null?l=e.stylize(r,"name"):l=e.stylize(Ue(r),"string");return`${l}:${f}${a}`}function wt(e,t,n,r){let i=t.length+n;if(i+t.length>e.breakLength)return!1;for(let o=0;o<t.length;o++)if(e.colors?i+=Ft(t[o]).length:i+=t[o].length,i>e.breakLength)return!1;return r===""||!ne(r,`
`)}function lt(e,t,n,r,i,o,s){if(e.compact!==!0){if(typeof e.compact=="number"&&e.compact>=1){let c=t.length;if(i===ae&&c>6&&(t=Yr(e,t,s)),e.currentDepth-o<e.compact&&c===t.length){let p=t.length+e.indentationLvl+r[0].length+n.length+10;if(wt(e,t,p,n)){let y=re(t,", ");if(!y.includes(`
`))return`${n?`${n} `:""}${r[0]} ${y} ${r[1]}`}}}let f=`
${yt(" ",e.indentationLvl)}`;return`${n?`${n} `:""}${r[0]}${f}  ${re(t,`,${f}  `)}${f}${r[1]}`}if(wt(e,t,0,n))return`${r[0]}${n?` ${n}`:""} ${re(t,", ")} `+r[1];let l=yt(" ",e.indentationLvl),a=n===""&&r[0].length===1?" ":`${n?` ${n}`:""}
${l}  `;return`${r[0]}${a}${re(t,`,
${l}  `)} ${r[1]}`}ot=function(t,n=!0){let r=0;n&&(t=fo(t)),t=jn(t,"NFC");for(let i of new Ln(t)){let o=Tn(i,0);ao(o)?r+=2:co(o)||r++}return r};var ao=e=>e>=4352&&(e<=4447||e===9001||e===9002||e>=11904&&e<=12871&&e!==12351||e>=12880&&e<=19903||e>=19968&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510||e>=110592&&e<=110593||e>=127488&&e<=127569||e>=127744&&e<=128591||e>=131072&&e<=262141),co=e=>e<=31||e>=127&&e<=159||e>=768&&e<=879||e>=8203&&e<=8207||e>=8400&&e<=8447||e>=65024&&e<=65039||e>=65056&&e<=65071||e>=917760&&e<=917999;function fo(e){return Er(e,"str"),e.replace(Nr,"")}var Xt=O;var Qt={length:!0,name:!0,arguments:!0,caller:!0,prototype:!0};var x=___altvEsbuild_altvInject_alt___,en=___altvEsbuild_altvInject_altShared___,at=class{log=new L("shared");resourceStopEvent=()=>{this.log.debug("resourceStop");for(let t of this.metaKeys)x.deleteMeta(t)};origAltOn;origAltOnce;origAltOff;origAltSetMeta;eventHandlers={local:{},remote:{}};metaKeys=new Set;baseObjects=new Set;hookedAltEvents={};eventHandlersWrappers=new Map;constructor(t){t.dev.enabled&&(this.origAltOn=this.hookAltEventAdd("local","on",1),this.origAltOnce=this.hookAltEventAdd("local","once",1,!0),this.origAltOff=this.hookAltEventRemove("local","off",1),this.hookAlt("getEventListeners",(n,r)=>typeof r=="string"?[...this.eventHandlers.local[r]??[]]:n(r),1),this.hookAlt("getRemoteEventListeners",(n,r)=>typeof r=="string"?[...this.eventHandlers.remote[r]??[]]:n(r),1),this.origAltSetMeta=this.hookAlt("setMeta",(n,r,i)=>{this.metaKeys.add(r),n(r,i)},2),this.origAltOn("resourceStop",this.resourceStopEvent),t.enhancedAltLog&&this.hookAltLogging())}hookAlt(t,n,r){let i=x[t];if(i==null)throw new Error(`[hookAlt] original property is not defined: ${t}`);if(Object.hasOwn(i,"___hookAlt"))throw new Error(`[hookAlt] already hooked property: ${t}`);return n.prototype||(n=n.bind(null,i)),Object.defineProperty(n,"___hookAlt",{enumerable:!1,configurable:!1,writable:!1,value:!0}),x[t]=(...o)=>{if(o.length<r)throw new Error(`${r} arguments expected`);return n(...o)},en[t]!=null&&(en[t]=n),i}hookAltEventAdd(t,n,r,i=!1){return this.hookAlt(n,(o,s,l)=>{if(!(typeof s=="string"||typeof s=="function"))throw new Error("Expected a string or function as first argument");if(typeof s=="function"){o(s);return}if(typeof l!="function")throw new Error("Expected a function as second argument");let a=this.eventHandlers[t];(a[s]??(a[s]=new Set)).add(l);let f=async(...p)=>{if(i&&(a[s]?.delete(l),this.eventHandlersWrappers.get(s)?.delete(l)),this.hookedAltEvents[s]){this.log.debug("skip calling user handler of hooked alt event:",s);return}try{await l(...p)}catch(y){throw x.logError(`Uncaught exception in event listener of event "${s}":
`,y?.stack??y),y}},c=this.eventHandlersWrappers.get(s)??new Map;this.eventHandlersWrappers.set(s,c),c.set(l,f),o(s,f)},r)}hookAltEventRemove(t,n,r){return this.hookAlt(n,(i,o,s)=>{if(this.log.debug(`hooked alt.${n} called args:`,o,typeof s),!(typeof o=="string"||typeof o=="function"))throw new Error("Expected a string or function as first argument");if(typeof o=="function"){i(o);return}if(typeof s!="function")throw new Error("Expected a function as second argument");let l=this.eventHandlersWrappers.get(o);if(!l){this.log.debug(`alt.${n} called but event handlers are not registered for event: ${o}`);return}let a=l.get(s);if(!a){this.log.debug(`alt.${n} called but event handler is not registered for event: ${o}`);return}this.eventHandlers[t][o]?.delete(s),l?.delete(s),i(o,a)},r)}hookAltEvent(t,n){this.hookedAltEvents[t]=!0,this.origAltOn(t,(...r)=>{this.log.debug("received hooked alt event:",t);let i=n(...r);this.emitAltEvent(t,...i)})}emitAltEvent(t,...n){let r=this.eventHandlers.local[t];if(!r){this.log.debug("callAltEvent:",t,"no handlers");return}for(let i of r)try{i(...n)}catch(o){let s=(o?.stack??o)+"";x.logError(`Exception at resource ${x.resourceName} in listener of "${t}" event:
  ${s}`)}}setPlayerObjectPrototype(t,n=x.Player){Object.setPrototypeOf(t,n.prototype)}generateEventName(t){return`___${I}:${t}___`}wrapBaseObjectChildClass(t){let n=t.prototype,r=Symbol("originalDestroy"),i=this.baseObjects,o=this.log;n[r]=n.destroy,n.destroy=function(){try{i.delete(this),this[r]()}catch(l){throw o.error(`failed to destroy alt.${t.name} error:`),l}};let s=function(...l){try{let a=new t(...l);return i.add(a),Object.setPrototypeOf(a,this.__proto__),a}catch(a){throw o.error(`failed to create alt.${t.name} error:`),a}};s.prototype=t.prototype,Object.defineProperty(s,"name",{value:t.name});try{let l=Object.keys(t);for(let a of l)if(!Qt[a])try{let{value:f,set:c}=Object.getOwnPropertyDescriptor(t,a);typeof f=="function"?s[a]=t[a]:Object.defineProperty(s,a,{get:()=>t[a],set:c?.bind(t)})}catch(f){this.log.error(`detected broken alt.${t.name} static property: ${a}. 
`,f?.stack??f)}}catch(l){this.log.error(l.stack??l)}return s}destroyBaseObjects(){this.log.debug("destroyBaseObjects count:",this.baseObjects.size);for(let t of this.baseObjects)t.destroy()}onResourceStop(t){this.origAltOn("resourceStop",t)}defineMetaSetter(t,n,r){return function(i,o){if(arguments.length<2)throw new Error("2 arguments expected");this[n](i,o),this[r]??={},this[r][i]=o}}hookAltLogging(){let t=(r,...i)=>{r(...i.map(o=>typeof o=="string"?o:Xt(o,{colors:!0})))},n=this.hookAlt("log",t,0);x.isClient&&(console.log=t.bind(null,n)),x.logDebug&&this.hookAlt("logDebug",t,0)}},u=new at(___altvEsbuild_altvInject_pluginOptions___);var q={restartCommand:u.generateEventName("restartCommand"),clientReady:u.generateEventName("clientReady")},de={playerConnect:u.generateEventName("playerConnect"),connectionComplete:u.generateEventName("connectionComplete")};var w=___altvEsbuild_altvInject_alt___,k;w.isClient&&(k=___altvEsbuild_altvInject_native___);var _e=class{origAltOnServer;log=new L("client");clearPlayerMeta;onResourceStop=()=>{this.clearGame(),u.destroyBaseObjects(),this.clearPlayerMeta?.()};constructor(t){let{bugFixes:n,dev:r}=t;n.webViewFlickering&&this.initWebViewFlickeringBugFix(),r.enabled&&(this.origAltOnServer=u.hookAltEventAdd("remote","onServer",1),u.hookAltEventAdd("remote","onceServer",1,!0),u.hookAltEventRemove("remote","offServer",1),n.playerPrototype&&this.initPlayerPrototypeTempFix(),r.restartCommand&&this.initRestartConsoleCommand(t),r.disconnectEvent&&this.initDisconnectEvent(),r.connectionCompleteEvent&&(this.log.debug("dev.connectionCompleteEvent:",r.connectionCompleteEvent),this.initConnectionCompleteEvent()),this.initClientReady(),this.hookBaseObjects(),this.clearPlayerMeta=this.initPlayerMetaCleanup(),u.onResourceStop(this.onResourceStop))}initPlayerPrototypeTempFix(){w.nextTick(()=>{for(let t of w.Player.all)!t.valid||(t!==w.Player.local?u.setPlayerObjectPrototype(t):(this.log.debug("set local player prototype"),u.setPlayerObjectPrototype(t,w.LocalPlayer)))}),this.origAltOnServer(de.playerConnect,t=>{u.setPlayerObjectPrototype(t)})}initRestartConsoleCommand(t){let n=t.dev.restartCommand===!0?"res":t.dev.restartCommand;this.log.debug("initRestartConsoleCommand command:",n),u.origAltOn("consoleCommand",r=>{r===n&&(this.log.info("~gl~restarting resource"),w.emitServerRaw(q.restartCommand))})}initWebViewFlickeringBugFix(){w.everyTick(()=>k.drawRect(0,0,0,0,0,0,0,0,!1))}initDisconnectEvent(){this.log.debug("initDisconnectEvent"),u.origAltOn("resourceStop",()=>u.emitAltEvent("disconnect"))}initConnectionCompleteEvent(){this.log.debug("initConnectionCompleteEvent");let t=!1;u.origAltOn("connectionComplete",()=>{t=!0}),this.origAltOnServer(de.connectionComplete,()=>{this.log.debug("received connectionComplete"),!t&&u.emitAltEvent("connectionComplete")})}initClientReady(){w.emitServerRaw(q.clientReady)}clearGame(){let t=w.Player.local;k.freezeEntityPosition(t,!1),k.setEntityVisible(t,!0,!1),k.doScreenFadeIn(0),k.triggerScreenblurFadeOut(0),k.stopAudioScenes(),k.newLoadSceneStop(),k.destroyAllCams(!1),k.animpostfxStopAll(),k.setCamDeathFailEffectState(0),k.displayHud(!0),k.displayRadar(!0),w.FocusData.clearFocus(),k.setFrontendActive(!1)}hookBaseObjects(){for(let t in w){let n=t,r=w[n];!(this.isAltBlipClass(r)||this.isAltObjectClass(r))||(this.log.debug("hooking class:",r.name),w[n]=u.wrapBaseObjectChildClass(r))}}isAltBlipClass(t){return t.prototype instanceof w.Blip}isAltObjectClass(t){return t.prototype instanceof w.Entity&&t.name==="Object"}initPlayerMetaCleanup(){let t=w.Player.prototype,n=t,r=Symbol("metaStoreKey"),i=Symbol("originalSetMeta");return n[i]=t.setMeta,t.setMeta=u.defineMetaSetter(n,i,r),()=>{for(let o of w.Player.all){if(!o?.valid)continue;let s=o;for(let l in s[r])o.deleteMeta(l)}}}};var $e=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t instanceof Error?t:new Error(t))}};var ue=class{constructor(t,n,r){this._net=t;this.port=n;this.connectHandler=r;this._socket=this.connect()}onError=t=>{(t?.code==="ECONNRESET"||t?.code==="ECONNREFUSED")&&(ue.logDebug(`disconnected from server, trying reconnecting in ${ue.RECONNECT_MS}ms...`),setTimeout(()=>this.connect(),ue.RECONNECT_MS))};onConnect=t=>{this.connectHandler(t)};_socket;get socket(){return this._socket}connect(){this._socket&&this._socket.destroy();let t=this._net.connect(this.port);return t.on("connect",this.onConnect.bind(this,t)),t.on("error",this.onError),t}},Y=ue;V(Y,"RECONNECT_MS",500),V(Y,"logDebug",()=>{});var m=___altvEsbuild_altvInject_alt___,tn;m.isServer&&(tn=await(async()=>await import("net"))());var ke=class{constructor(t){this.options=t;let{dev:n,bugFixes:r}=t;if(n.enabled){this.origAltOnClient=u.hookAltEventAdd("remote","onClient",1),u.hookAltEventAdd("remote","onceClient",1,!0),u.hookAltEventRemove("remote","offClient",1),u.hookAlt("setSyncedMeta",(s,l,a)=>{this.syncedMetaKeys.add(l),s(l,a)},2),this.hookBaseObjects();let i=this.hookAltPlayer(),o=()=>{};n.playersReconnect&&(this.initPlayersReconnect(t),o=this.despawnPlayers.bind(this)),u.onResourceStop(this.onResourceStop.bind(this,i,o)),n.hotReload&&(this.socketConnect=new Y(tn,this.options.dev.hotReloadServerPort,s=>{this.socket=s,this.eventManager=this.initEventManager(s),this.onConnect(),this.connectedAgain=!0})),n.enhancedRestartCommand?this.initEnhancedRestartCommand(t):n.restartCommand&&this.initRestartConsoleCommand(t),n.connectionCompleteEvent&&this.initConnectionCompleteEvent(),r.playerPrototype&&this.initPlayerPrototypeTempFix()}}events={buildStart:t=>{this.log.debug(`[buildStart] ms: ${new Date().getMilliseconds()} mode:`,t),this.onBuildStart(t)},buildEnd:(t,n)=>{if(this.log.debug("[buildEnd] received:",t),n&&(this.log.debug("received cached buildEnd -> emulate buildStart first"),this.onBuildStart(t)),!this.buildsInProgress.delete(t)){this.log.debug(`received unknown buildEnd: ${t}, do nothing`);return}if(this.buildsInProgress.size){this.log.debug("remaining builds in progress:",this.buildsInProgress.size),this.waitingForBuildEnd===t&&(this.waitingForBuildEnd=this.flipMode(t));return}if(this.waitingForBuildEnd!==t){this.log.debug("received not what we waiting for");return}this.log.debug("no builds in progress -> restart"),this.restartResource()},clientConnect:()=>{this.log.debug("clientConnect"),this.clientConnected=!0},clientDisconnect:()=>{this.log.debug("clientDisconnect"),this.clientConnected=!1}};onConnect=()=>{if(this.connectedAgain){this.restartResource();return}this.log.debug("net socket connected, sending connect server event"),this.sendEvent("connect","server")};onSocketError=(t,n)=>{this.log.error("[events]",t,n)};onResourceStop=(t,n)=>{this.log.debug("resourceStop");for(let r of this.syncedMetaKeys)this.log.debug("deleting synced meta key:",r),m.deleteSyncedMeta(r);t(),n(),u.destroyBaseObjects()};socket;eventManager;log=new L("server");clientConnected=!1;anotherBuildStartTimeout=null;waitingForBuildEnd=null;restartInProgress=!1;connectedAgain=!1;buildsInProgress=new Set;syncedMetaKeys=new Set;origAltOnClient;socketConnect;playerReadyEvents=new Map;sendEvent(t,...n){if(!this.eventManager){this.log.error("[sendEvent] no event manager");return}this.eventManager?.send(t,...n)}restartResource(){if(this.restartInProgress){this.log.error("resource restart already in progress");return}this.restartInProgress=!0,this.clearCurrentBuild();let t=this.getFullResourceName();this.log.info(`restarting resource ${t}...`),m.restartResource(t)}clearCurrentBuild(){this.waitingForBuildEnd=null,this.buildsInProgress.clear()}flipMode(t){return t==="client"?"server":"client"}initEventManager(t){return new pe(t,this.events,this.onSocketError)}hookAltPlayer(){let t=m.Player.prototype,n=Symbol("metaStoreKey"),r=Symbol("syncedMetaStoreKey"),i=Symbol("streamSyncedMetaStoreKey"),o=Symbol("localMetaStoreKey"),s=Symbol("originalSetMeta"),l=Symbol("originalSetSyncedMeta"),a=Symbol("originalSetStreamSyncedMeta"),f=Symbol("originalSetLocalMeta"),c=t;return c[s]=t.setMeta,c[l]=t.setSyncedMeta,c[a]=t.setStreamSyncedMeta,c[f]=t.setLocalMeta,t.setMeta=u.defineMetaSetter(c,s,n),t.setSyncedMeta=u.defineMetaSetter(c,l,r),t.setStreamSyncedMeta=u.defineMetaSetter(c,a,i),t.setLocalMeta=u.defineMetaSetter(c,f,o),()=>{for(let p of m.Player.all){if(!p?.valid)continue;let y=p;for(let h in y[n])p.deleteMeta(h);for(let h in y[r])p.deleteSyncedMeta(h);for(let h in y[i])p.deleteStreamSyncedMeta(h);for(let h in y[o])p.deleteLocalMeta(h)}}}initPlayersReconnect({dev:{playersReconnectDelay:t,playersReconnectResetPos:n}}){let r=new m.Vector3(0,0,72),i=`${I}:resourceRestarted`;if(this.log.debug("_alt.getMeta(resourceRestartedKey):",m.getMeta(i)),!m.getMeta(i)){this.log.debug("set resource restarted"),u.origAltSetMeta(i,!0);return}let o=m.Player.all;if(!o.length){this.log.debug("no players to reconnect");return}for(let s of o)!s.valid||this.initPlayerReadyEvent(s);this.log.info(`start a timer for ~cl~${t}~w~ ms to reconnect players (${o.length})`),setTimeout(()=>{for(let s of o)!s.valid||(s.dimension=m.defaultDimension,s.streamed=!0,s.collision=!0,s.invincible=!1,s.visible=!0,s.frozen=!1,n&&(s.pos=r),this.waitForPlayerReadyEvent(s).then(l=>{if(!l){this.log.debug("waitForPlayerReadyEvent promise resolved false, player disconnected");return}this.log.debug("waitForPlayerReadyEvent success player:",s.name,s.id),m.emit("playerConnect",s)}).catch(l=>{this.log.error(l.stack)}))},t)}despawnPlayers(){this.log.debug("despawn players");for(let t of m.Player.all)!t.valid||(t.removeAllWeapons(),t.clearBloodDamage(),t.detach(),t.despawn())}initPlayerPrototypeTempFix(){m.nextTick(()=>{for(let t of m.Player.all)!t.valid||u.setPlayerObjectPrototype(t)}),u.origAltOn("playerConnect",t=>{u.setPlayerObjectPrototype(t)})}initRestartConsoleCommand(t){let n=t.dev.restartCommand===!0?"res":t.dev.restartCommand,r=()=>{this.restartResource()};u.origAltOn("consoleCommand",i=>{i===n&&r()}),this.origAltOnClient(q.restartCommand,()=>{r()})}initEnhancedRestartCommand({dev:{enhancedRestartCommand:t}}){let n=t===!0?"res":t;if(m.hasResource(ee))this.log.debug("control resource already started",ee);else{this.log.debug("control resource is not started",ee);let r=`../node_modules/altv-esbuild/dist/${ee}`;this.log.debug("resource control path:",r),m.nextTick(()=>{u.origAltOnce(u.generateEventName("resourceControlReady"),()=>{m.emit(u.generateEventName("resourceControlInit"),this.getFullResourceName(),n)}),m.startResource(r)})}}initConnectionCompleteEvent(){this.log.debug("initConnectionCompleteEvent"),this.origAltOnClient(q.clientReady,t=>{this.log.debug("received clientReady player:",t.name,t.id),t.emitRaw(de.connectionComplete);let n=this.playerReadyEvents.get(t);if(!n){this.log.debug("cant get ready event, skip");return}n.resolve(!0)})}hookBaseObjects(){for(let t in m){let n=t,r=m[n];if(!this.isBaseObjectClass(r))continue;let i=!1;try{new r,i=!0}catch(o){o?.message?.includes("abstract")&&(i=!0)}i||(m[n]=u.wrapBaseObjectChildClass(r))}}isBaseObjectClass(t){return t.prototype instanceof m.BaseObject&&t!==m.Player}onBuildStart(t){let n=this.flipMode(t);if(this.buildsInProgress.add(t),this.buildsInProgress.size===1&&this.waitingForBuildEnd===n&&this.buildsInProgress.has(n)){this.log.debug(`waiting currently for first build, change waitingForBuildEnd to: ${t}`),this.waitingForBuildEnd=t;return}if(this.anotherBuildStartTimeout){this.log.debug("[buildStart] received another build:",t,"clear timeout"),clearTimeout(this.anotherBuildStartTimeout),this.anotherBuildStartTimeout=null;return}if(t==="server"&&!this.clientConnected){this.log.debug("[buildStart] client is not connected, skip waiting for another build"),this.waitingForBuildEnd=t;return}this.waitingForBuildEnd=n,this.log.debug(`[buildStart] waiting for another build: ${this.waitingForBuildEnd} to start...`),this.anotherBuildStartTimeout=setTimeout(()=>{this.anotherBuildStartTimeout=null,this.log.debug(`another build didnt started after ${ke.MAX_ANOTHER_BUILD_START_MS}ms`),this.buildsInProgress.has(t)?(this.log.debug(`waiting for build: ${t} to end now...`),this.waitingForBuildEnd=t):(this.log.debug(`first build: ${t} ended -> restart`),this.restartResource())},ke.MAX_ANOTHER_BUILD_START_MS)}initPlayerReadyEvent(t){let n=new $e;this.playerReadyEvents.set(t,n);let r=i=>{i===t&&(this.playerReadyEvents.delete(t),n.resolve(!1))};n.promise.finally(()=>{u.origAltOff("playerDisconnect",r)}),u.origAltOn("playerDisconnect",r),this.origAltOnClient(u.generateEventName("playerReady"),r)}async waitForPlayerReadyEvent(t){let n=this.playerReadyEvents.get(t);return n?await n.promise:(this.log.warn("waitForPlayerReadyEvent unknown player:",t.name,t.id),!1)}getFullResourceName(){let{path:t}=m.Resource.current,n=`${m.rootDir}\\resources\\`;return t.slice(n.length).replaceAll("\\","/")}},X=ke;V(X,"MAX_ANOTHER_BUILD_START_MS",500),V(X,"RECONNECT_MS",500);var ct=___altvEsbuild_altvInject_pluginOptions___;ct.mode==="client"?new _e(ct):new X(ct);
